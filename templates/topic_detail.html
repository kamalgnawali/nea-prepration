{% extends 'base.html' %}
{% load static %}

{% block title %}{{ page_title }}{% endblock %}

{% block content %}
    <h2 class="mb-4 text-center">ЁЯУЪ {{ subject.name }} рдиреЛрдЯреНрд╕</h2>
    <p class="lead text-center mb-5">рдмрд╛рдпрд╛рдБрдкрдЯреНрдЯреАрдХрд╛ рдЯрдкрд┐рдХрд╣рд░реВрдмрд╛рдЯ рдиреЛрдЯ рдЪрдпрди рдЧрд░реНрдиреБрд╣реЛрд╕реНред</p>

    <div class="row">
        {# рдмрд╛рдпрд╛рдБ рдкреНрдпрд╛рдирд▓: рдЯрдкрд┐рдХрд╣рд░реВрдХреЛ рд╕реВрдЪреА #}
        <div class="col-md-4 mb-4 mb-md-0">
            <div class="card shadow-sm h-100">
                <div class="card-header bg-secondary text-white">
                    <h5 class="mb-0">рдЯрдкрд┐рдХрд╣рд░реВ</h5>
                </div>
                <div class="list-group list-group-flush">
                    {% if topics %}
                        {% for topic in topics %}
                            <a href="{% url 'notes:topic_detail' subject_slug=subject.slug topic_slug=topic.slug %}" 
                               class="list-group-item list-group-item-action {% if selected_topic == topic %}active{% endif %}">
                                {{ topic.name }}
                            </a>
                        {% endfor %}
                    {% else %}
                        <p class="list-group-item text-muted">рдпрд╕ рд╡рд┐рд╖рдпрдХрд╛ рд▓рд╛рдЧрд┐ рдХреБрдиреИ рдЯрдкрд┐рдХрд╣рд░реВ рдЙрдкрд▓рдмреНрдз рдЫреИрдирдиреНред</p>
                    {% endif %}
                </div>
            </div>
        </div>

        {# рджрд╛рдпрд╛рдБ рдкреНрдпрд╛рдирд▓: рдЪрдпрди рдЧрд░рд┐рдПрдХреЛ рдиреЛрдЯрдХреЛ рд╕рд╛рдордЧреНрд░реА рд╡рд╛ PDF #}
        <div class="col-md-8">
            <div class="card shadow-sm h-100">
                <div class="card-body">
                    {% if selected_topic %}
                        <h4 class="card-title mb-3">
                            <i class="fas fa-file-alt me-2"></i> {{ selected_topic.name }} рдХреЛ рдиреЛрдЯ
                        </h4>
                        {% if note_pdf_url %}
                            {# PDF рдлрд╛рдЗрд▓рд▓рд╛рдИ рдпрд╣рд╛рдБ рдЗрдореНрдмреЗрдб рдЧрд░реНрдиреБрд╣реЛрд╕реН #}
                            <div class="embed-responsive embed-responsive-16by9" style="height: 600px;">
                                <iframe class="embed-responsive-item" src="{{ note_pdf_url }}" width="100%" height="100%" frameborder="0">
                                    рдпреЛ рдмреНрд░рд╛рдЙрдЬрд░рд▓реЗ PDF рд╣рд░реВ рдЗрдореНрдмреЗрдб рдЧрд░реНрди рд╕рдорд░реНрдерди рдЧрд░реНрджреИрдиред рддрдкрд╛рдИрдВ PDF <a href="{{ note_pdf_url }}" target="_blank">рдпрд╣рд╛рдБ рдбрд╛рдЙрдирд▓реЛрдб рдЧрд░реНрди рд╕рдХреНрдиреБрд╣реБрдиреНрдЫ</a>ред
                                </iframe>
                            </div>
                        {% elif note_content %}
                            {# рдпрджрд┐ рдиреЛрдЯ рдЯреЗрдХреНрд╕реНрдЯрдХреЛ рд░реВрдкрдорд╛ рдЫ рднрдиреЗ #}
                            <div class="note-content-display" style="white-space: pre-wrap;">
                                {{ note_content }}
                            </div>
                        {% else %}
                            <p class="alert alert-warning">рдпрд╕ рдЯрдкрд┐рдХрдХрд╛ рд▓рд╛рдЧрд┐ рдХреБрдиреИ рдиреЛрдЯ рдЙрдкрд▓рдмреНрдз рдЫреИрдиред</p>
                        {% endif %}
                    {% else %}
                        <p class="alert alert-info text-center">
                            рдХреГрдкрдпрд╛ рдмрд╛рдпрд╛рдБрдкрдЯреНрдЯрд┐рдмрд╛рдЯ рдПрдЙрдЯрд╛ рдЯрдкрд┐рдХ рдЪрдпрди рдЧрд░реНрдиреБрд╣реЛрд╕реН рдиреЛрдЯ рд╣реЗрд░реНрдирдХрд╛ рд▓рд╛рдЧрд┐ред
                        </p>
                    {% endif %}
                </div>
            </div>
        </div>
    </div>

    <div class="text-center mt-5">
        <a href="{% url 'notes:subject_list' %}" class="btn btn-secondary btn-lg">
            <i class="fas fa-arrow-left me-2"></i> рд╕рдмреИ рд╡рд┐рд╖рдпрд╣рд░реВрдорд╛ рдлрд░реНрдХрдиреБрд╣реЛрд╕реН
        </a>
    </div>
{% endblock %}